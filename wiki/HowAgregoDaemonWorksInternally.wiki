#summary How AgreGo works internally

=How it works=

AgreGo is implemented in C and in user space. Today it works only on linux systems.

To aggregate several network links, AgreGo create an IP tunnel. To create it, Agrego use TUN interfaces. One TUN interface is created on each AgreGo endpoint. They are the both end of the IP tunnel. 

http://daligro.net/agrego/internally.png

The aggregation is done by the C program which read packets from the TUN, write them on UDP socket and also read packets from UDP sockets and write them on the TUN on each endpoints.

To _connect_ the both endpoints, a handshake is done. It have been implemented manually, and will be replaced to works with SSL or TLS.

Agrego has been designed to aggregate xDSL connections. In this configuration, the local endpoint don't have a default route (to be able to use every xDSL connections), and the distant endpoint have only one IP address. So the local endpoint can't access to the distant endpoint if it didn't receive something from it. So The distant endpoint must contact the local endpoint first.